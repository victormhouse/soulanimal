<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>灵魂栖息地 | 动物塑性格测试</title>
    
    <!-- 引入字体 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@300;500;700;900&family=Noto+Sans+SC:wght@300;400;500;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- 引入 html2canvas 用于截图保存 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    
    <!-- 配置 Tailwind -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['"Noto Sans SC"', 'sans-serif'],
                        serif: ['"Noto Serif SC"', 'serif'],
                        english: ['"Playfair Display"', 'serif'],
                    },
                    colors: {
                        'mist-green': '#E0E7E2',
                        'sage': '#9CAF88',
                        'dusty-pink': '#E8D4D4',
                        'cream': '#FDFBF7',
                        'charcoal': '#2C2C2C',
                    },
                    animation: {
                        'blob': 'blob 10s infinite',
                        'fade-in-up': 'fadeInUp 0.8s cubic-bezier(0.16, 1, 0.3, 1)',
                        'breathe': 'breathe 3s ease-in-out infinite',
                        'spin-slow': 'spin 8s linear infinite',
                        'reverse-spin': 'spin 6s linear infinite reverse',
                    },
                    keyframes: {
                        blob: {
                            '0%': { transform: 'translate(0px, 0px) scale(1)' },
                            '33%': { transform: 'translate(30px, -50px) scale(1.1)' },
                            '66%': { transform: 'translate(-20px, 20px) scale(0.9)' },
                            '100%': { transform: 'translate(0px, 0px) scale(1)' },
                        },
                        fadeInUp: {
                            '0%': { opacity: '0', transform: 'translateY(20px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        },
                        breathe: {
                            '0%, 100%': { transform: 'scale(1)', opacity: '0.8' },
                            '50%': { transform: 'scale(1.05)', opacity: '1' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        /* 全局样式微调 */
        body {
            background-color: #FDFBF7;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
        }

        /* 噪点纹理 - 增加胶片质感 */
        .noise-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 50;
            opacity: 0.06;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
        }

        /* 高级毛玻璃 */
        .glass-card {
            background: rgba(255, 255, 255, 0.65);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.8);
            box-shadow: 0 8px 32px 0 rgba(100, 100, 100, 0.05);
        }

        /* 隐藏滚动条 */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        /* 按钮点击态 */
        .btn-press:active { transform: scale(0.98); }
        
        /* 进度条动画 */
        .progress-transition { transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1); }

        /* 结果页海报样式 */
        .poster-shadow {
            box-shadow: 0 20px 60px -15px rgba(0, 0, 0, 0.15);
        }
    </style>
</head>
<body class="min-h-screen text-charcoal font-sans selection:bg-sage selection:text-white">

    <!-- 噪点层 -->
    <div class="noise-overlay"></div>

    <!-- 动态背景层 (Aurora Gradient) -->
    <div class="fixed inset-0 -z-10 overflow-hidden">
        <div class="absolute top-[-10%] left-[-10%] w-[70%] h-[70%] bg-[#E8D4D4] rounded-full mix-blend-multiply filter blur-[80px] opacity-60 animate-blob"></div>
        <div class="absolute top-[-10%] right-[-10%] w-[70%] h-[70%] bg-[#D4E2E8] rounded-full mix-blend-multiply filter blur-[80px] opacity-60 animate-blob animation-delay-2000"></div>
        <div class="absolute bottom-[-20%] left-[20%] w-[70%] h-[70%] bg-[#E0E7E2] rounded-full mix-blend-multiply filter blur-[80px] opacity-60 animate-blob animation-delay-4000"></div>
    </div>

    <!-- 错误提示 -->
    <div id="error-toast" class="fixed top-6 left-1/2 -translate-x-1/2 bg-red-400/90 backdrop-blur text-white px-6 py-3 rounded-full shadow-lg z-[100] hidden transition-all text-sm font-medium"></div>

    <!-- 主容器 -->
    <main class="relative min-h-screen flex flex-col items-center justify-center p-5 md:p-8">
        
        <!-- 页面 1: Landing -->
        <div id="page-landing" class="w-full max-w-sm flex flex-col items-center animate-fade-in-up">
            <!-- 装饰性Logo区域 -->
            <div class="mb-10 relative">
                <div class="absolute inset-0 bg-white/40 blur-2xl rounded-full"></div>
                <div class="relative w-24 h-24 rounded-full border border-white/50 flex items-center justify-center bg-white/20 backdrop-blur-sm shadow-sm mb-6 mx-auto animate-breathe">
                    <span class="text-4xl filter drop-shadow-sm">🦄</span>
                </div>
                <div class="text-center space-y-2">
                    <p class="font-english text-sage tracking-widest text-xs uppercase font-bold">Find Your Inner Self</p>
                    <h1 class="font-serif text-4xl text-gray-800 font-bold tracking-tight">动物塑人格测试</h1>
                    <div class="h-px w-12 bg-gray-300 mx-auto my-4"></div>
                    <p class="font-serif text-gray-500 text-sm tracking-widest">探寻潜意识里的本命神兽</p>
                </div>
            </div>

            <!-- 诗意文案 -->
            <div class="glass-card w-full rounded-2xl p-6 mb-8 text-center relative overflow-hidden group">
                <div class="absolute -right-6 -top-6 w-20 h-20 bg-sage/10 rounded-full blur-xl group-hover:bg-sage/20 transition duration-700"></div>
                <p class="font-serif text-gray-600 leading-loose text-sm italic">
                    “外表是应对世界的保护色，<br>
                    内心才是灵魂的栖息地。<br>
                    看看哪种动物，<br>
                    最像那个不被定义的你？”
                </p>
            </div>

            <!-- 按钮组 -->
            <div class="w-full space-y-4">
                <button onclick="startQuiz('short')" class="btn-press group w-full bg-gray-800 text-white py-4 rounded-full shadow-lg hover:shadow-xl hover:bg-black transition-all duration-300 flex items-center justify-center relative overflow-hidden">
                    <span class="relative z-10 font-serif tracking-widest text-sm">✨ 开启旅程 · 20题速测</span>
                    <div class="absolute inset-0 bg-white/10 translate-y-full group-hover:translate-y-0 transition-transform duration-300"></div>
                </button>
                
                <button onclick="startQuiz('long')" class="btn-press w-full bg-white/60 hover:bg-white text-gray-700 py-4 rounded-full border border-white shadow-sm hover:shadow-md transition-all duration-300 flex items-center justify-center gap-2 group">
                    <span class="w-2 h-2 rounded-full bg-sage group-hover:scale-125 transition-transform"></span>
                    <span class="font-serif tracking-widest text-sm">🕯️ 深度唤醒 · 60题精准版</span>
                </button>

                <div onclick="showPokedex()" class="mt-6 text-center cursor-pointer opacity-50 hover:opacity-100 transition duration-300">
                    <span class="text-[10px] tracking-[0.2em] uppercase border-b border-gray-400 pb-0.5">Unlock Collection · 收集图鉴</span>
                </div>
            </div>
            
            <footer class="mt-12 text-[10px] text-gray-400 font-serif opacity-60">
                Created for Soul · Inner Peace
            </footer>
        </div>

        <!-- 页面 2: Quiz -->
        <div id="page-quiz" class="hidden w-full max-w-sm flex-col min-h-[600px] animate-fade-in-up">
            <!-- 顶部导航 -->
            <div class="flex justify-between items-center mb-8 px-2">
                <button onclick="backToHome()" class="text-gray-400 hover:text-gray-800 transition">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M10 19l-7-7m0 0l7-7m-7 7h18"/></svg>
                </button>
                <div class="flex flex-col items-end">
                    <span class="font-english text-xs text-sage font-bold" id="quiz-progress-num">01</span>
                    <span class="text-[10px] text-gray-300 uppercase tracking-wider">Question</span>
                </div>
            </div>

            <!-- 进度条 -->
            <div class="w-full h-1 bg-gray-200/50 rounded-full mb-10 overflow-hidden">
                <div id="progress-bar" class="h-full bg-sage rounded-full w-0 progress-transition"></div>
            </div>

            <!-- 问题卡片 -->
            <div class="flex-1 flex flex-col">
                <!-- 修改：将 font-serif 改为 font-sans 并添加 font-bold -->
                <h2 id="question-text" class="font-sans font-bold text-xl md:text-2xl text-gray-800 leading-normal mb-10 min-h-[4rem]">
                    题目加载中...
                </h2>
                
                <div id="options-container" class="space-y-4">
                    <!-- 选项将在这里生成 -->
                </div>
            </div>

            <!-- 底部控制 -->
            <div class="mt-8 flex justify-center opacity-0 transition-opacity duration-300" id="quiz-controls">
                <button onclick="prevQuestion()" class="text-xs text-gray-400 hover:text-sage transition flex items-center gap-1 px-4 py-2 rounded-full hover:bg-white/50">
                    <span>↺</span> 撤回上一题
                </button>
            </div>
        </div>

        <!-- 页面 3: Loading -->
        <div id="page-loading" class="hidden w-full h-screen fixed inset-0 z-40 bg-[#FDFBF7]/90 backdrop-blur-xl flex-col items-center justify-center">
            <div class="relative w-32 h-32 mb-8 flex items-center justify-center">
                <div class="absolute inset-0 border border-sage/20 rounded-full animate-spin-slow"></div>
                <div class="absolute inset-2 border border-sage/40 rounded-full animate-reverse-spin"></div>
                <div class="w-16 h-16 bg-sage/10 rounded-full animate-breathe backdrop-blur-sm flex items-center justify-center">
                    <span class="text-2xl">✨</span>
                </div>
            </div>
            <h3 class="font-serif text-xl text-gray-800 mb-2 tracking-widest">正在通灵...</h3>
            <p id="loading-text" class="text-xs text-gray-400 font-light tracking-widest uppercase font-english">Connecting to your soul</p>
        </div>

        <!-- 页面 4: Result -->
        <div id="page-result" class="hidden w-full max-w-sm animate-fade-in-up pb-10">
            <!-- 结果海报卡片 (添加了ID用于截图) -->
            <div id="result-card-container" class="relative bg-white rounded-[2rem] overflow-hidden poster-shadow mb-6 transform transition-transform">
                <!-- 动态背景 -->
                <div id="result-bg" class="absolute inset-0 opacity-30 transition-colors duration-1000 bg-gradient-to-br from-sage/50 to-mist-green"></div>
                
                <!-- 装饰纹理 -->
                <div class="absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0IiBoZWlnaHQ9IjQiPgo8cmVjdCB3aWR0aD0iNCIgaGVpZ2h0PSI0IiBmaWxsPSIjZmZmIi8+CjxyZWN0IHdpZHRoPSIxIiBoZWlnaHQ9IjEiIGZpbGw9IiMwMDAiIG9wYWNpdHk9IjAuMDUiLz4KPC9zdmc+')] opacity-30"></div>

                <div class="relative z-10 p-8 flex flex-col items-center text-center">
                    <!-- 顶部标签 -->
                    <div class="w-full flex justify-between items-center mb-6">
                        <span class="text-[10px] uppercase tracking-widest text-gray-400 font-bold border border-gray-200 px-2 py-0.5 rounded-full">Soul Type</span>
                        <span class="text-[10px] text-gray-300 font-serif date-display">2024</span>
                    </div>

                    <!-- 核心形象 -->
                    <div class="mb-4 relative group">
                        <div class="absolute inset-0 bg-white/60 blur-3xl rounded-full scale-150 animate-pulse"></div>
                        <div class="w-32 h-32 rounded-full border border-white/50 bg-white/30 backdrop-blur-md flex items-center justify-center shadow-sm relative overflow-hidden">
                            <span id="result-icon" class="text-7xl filter drop-shadow-md transform group-hover:scale-110 transition duration-500 cursor-default">🦄</span>
                        </div>
                    </div>

                    <!-- 动物名称 & Slogan -->
                    <h1 id="result-animal" class="font-serif text-3xl font-bold text-gray-800 mb-2 tracking-wide">独角兽</h1>
                    <p id="result-slogan" class="font-serif text-xs text-gray-500 italic mb-6">"纯粹的幻想生物，在凡间寻找天堂"</p>

                    <!-- 标签云 -->
                    <div id="result-tags" class="flex flex-wrap justify-center gap-2 mb-8">
                        <!-- JS 注入 -->
                    </div>

                    <!-- 分割线 -->
                    <div class="w-8 h-px bg-gray-300 mb-8"></div>

                    <!-- 深度分析 -->
                    <div class="text-left w-full space-y-6">
                        <div>
                            <h4 class="font-bold text-xs text-gray-400 uppercase tracking-widest mb-2 flex items-center gap-2">
                                <span class="w-1 h-1 bg-sage rounded-full"></span> 灵魂侧写
                            </h4>
                            <p id="result-analysis" class="text-sm text-gray-600 leading-7 text-justify font-light">
                                分析文案加载中...
                            </p>
                        </div>
                        
                        <div class="grid grid-cols-1 gap-6">
                            <div class="bg-white/50 p-4 rounded-xl border border-white">
                                <h4 class="font-bold text-xs text-gray-400 uppercase tracking-widest mb-2">Social Mode</h4>
                                <p id="result-social" class="text-xs text-gray-600 leading-relaxed text-justify">社交文案...</p>
                            </div>
                            <div class="bg-white/50 p-4 rounded-xl border border-white">
                                <h4 class="font-bold text-xs text-gray-400 uppercase tracking-widest mb-2">Energy Source</h4>
                                <p id="result-energy" class="text-xs text-gray-600 leading-relaxed text-justify">能量文案...</p>
                            </div>
                        </div>

                        <!-- 阴影模式 (折叠式设计) -->
                        <div class="border-t border-gray-100 pt-4">
                            <h4 class="font-bold text-[10px] text-gray-400 uppercase tracking-widest mb-2 flex items-center gap-1">
                                <svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" /></svg>
                                Shadow Side
                            </h4>
                            <p id="result-shadow" class="text-[10px] text-gray-500 leading-5 text-justify opacity-80">
                                阴影文案...
                            </p>
                        </div>
                    </div>
                    
                    <!-- 底部水印 (仅截图可见，代码中可控制) -->
                    <div class="mt-8 text-[8px] text-gray-300 font-serif tracking-[0.2em] opacity-50">SOUL HABITAT · 2024</div>
                </div>
            </div>

            <!-- 底部操作栏 -->
            <div class="flex flex-col gap-3 px-4">
                <button onclick="returnToLanding()" class="btn-press w-full bg-gray-800 text-white py-3.5 rounded-full shadow-lg text-sm font-serif tracking-widest hover:bg-black transition">
                    重新测试
                </button>
                <div class="flex gap-3">
                    <button onclick="showPokedex()" class="btn-press flex-1 bg-white text-gray-600 py-3.5 rounded-full border border-gray-200 text-xs font-medium hover:bg-gray-50 transition">
                        查看图鉴
                    </button>
                    <!-- 实现了保存图片功能 -->
                    <button onclick="saveCard(this)" class="btn-press flex-1 bg-sage/20 text-sage py-3.5 rounded-full border border-sage/20 text-xs font-bold hover:bg-sage/30 transition flex items-center justify-center gap-1">
                        <span>📥</span> 保存卡片
                    </button>
                </div>
            </div>
        </div>

        <!-- 页面 5: Pokedex (侧滑浮层) -->
        <div id="page-pokedex" class="hidden fixed inset-0 z-50">
            <div class="absolute inset-0 bg-gray-900/20 backdrop-blur-sm transition-opacity" onclick="closePokedex()"></div>
            <div id="pokedex-drawer" class="absolute right-0 top-0 bottom-0 w-full max-w-md bg-[#FDFBF7] shadow-2xl transform transition-transform duration-300 translate-x-full flex flex-col">
                
                <!-- Header -->
                <div class="p-6 border-b border-gray-100 flex items-center justify-between bg-white/50 backdrop-blur-md z-10">
                    <div>
                        <h2 class="font-serif text-xl font-bold text-gray-800">灵魂图鉴</h2>
                        <p class="font-english text-[10px] text-gray-400 tracking-widest uppercase mt-1">Collection of 24 Souls</p>
                    </div>
                    <button onclick="closePokedex()" class="w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center hover:bg-gray-200 transition">
                        <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
                    </button>
                </div>

                <!-- List -->
                <div class="flex-1 overflow-y-auto p-5 space-y-3 no-scrollbar" id="pokedex-grid">
                    <!-- JS 生成列表 -->
                </div>
            </div>
        </div>

    </main>

    <!-- 脚本区域：包含数据和逻辑 -->
    <script>
        // ================= 数据部分 =================
        
        // 20题库 (从 quiz_data_advanced.js 导入)
        const questions = [
          {
            "id": 1,
            "category": "E/I", // 能量来源：外向 vs 内向
            "q": "如果你是一本书，你希望被摆放在图书馆的哪个位置？",
            "options": [
              { "t": "进门处的畅销榜首，即使会被翻阅到卷边。", "s": { "E": 2, "I": 0 } },
              { "t": "热门分类的书架上，期待与感兴趣的人相遇。", "s": { "E": 1, "I": 0 } },
              { "t": "安静的文学区角落，只等待懂我的灵魂。", "s": { "E": 0, "I": 1 } },
              { "t": "上了锁的古籍室，我不希望被打扰，只愿独自沉睡。", "s": { "E": 0, "I": 2 } }
            ]
          },
          {
            "id": 2,
            "category": "S/N", // 认知方式：实感 vs 直觉
            "q": "面对一幅只有杂乱线条的抽象画，你的第一反应是？",
            "options": [
              { "t": "分析画家的笔触技巧和颜料材质。", "s": { "S": 2, "N": 0 } },
              { "t": "试图辨认这些线条像现实生活中的什么物体。", "s": { "S": 1, "N": 0 } },
              { "t": "感受到了一种难以言喻的情绪（如愤怒或悲伤）。", "s": { "S": 0, "N": 1 } },
              { "t": "脑海中瞬间浮现出一个完整的、画中未画出的奇幻故事。", "s": { "S": 0, "N": 2 } }
            ]
          },
          {
            "id": 3,
            "category": "T/F", // 判断依据：逻辑 vs 情感
            "q": "朋友向你哭诉他犯的一个明显错误（导致他被批评），你会？",
            "options": [
              { "t": "直接指出他的逻辑漏洞，这是帮他止损的最好方式。", "s": { "T": 2, "F": 0 } },
              { "t": "先帮他分析补救措施，等事情平息后再安慰情绪。", "s": { "T": 1, "F": 0 } },
              { "t": "先递纸巾陪他骂老板，道理等他情绪好了再说。", "s": { "T": 0, "F": 1 } },
              { "t": "无条件站在他这边，哪怕他错了，我也要帮他对抗世界。", "s": { "T": 0, "F": 2 } }
            ]
          },
        {
            "id": 4,
            "category": "J/P", // 生活态度：控制 vs 感知
            "q": "你内心最深处的恐惧，更接近于？",
            "options": [
              { "t": "失去控制：生活脱轨，被原始的冲动或混乱吞噬。", "s": { "J": 2, "P": 0 } },
              { "t": "被所有人遗忘：建立的一切都化为乌有，毫无痕迹。", "s": { "J": 1, "P": 0 } }, // 秩序/成就的毁灭
              { "t": "成为平庸之辈：过着一眼望到头、可被替代的人生。", "s": { "J": 0, "P": 1 } }, // 拒绝按部就班
              { "t": "被囚禁：无论是物理上还是精神上，失去选择的权利。", "s": { "J": 0, "P": 2 } }
            ]
          },
          {
            "id": 5,
            "category": "E/I", // 社交充电
            "q": "经历了一周的高强度工作，周五晚上你的'回血'方式是？",
            "options": [
              { "t": "组个大局！KTV、火锅、剧本杀，越热闹越好。", "s": { "E": 2, "I": 0 } },
              { "t": "约一两个知心好友，去安静的清吧聊聊天。", "s": { "E": 1, "I": 0 } },
              { "t": "一个人在家，但会开着电视或直播，需要一点背景音。", "s": { "E": 0, "I": 1 } },
              { "t": "彻底切断联系，拉上窗帘，享受绝对的寂静和独处。", "s": { "E": 0, "I": 2 } }
            ]
          },
          {
            "id": 6,
            "category": "S/N", // 关注点
            "q": "走在一条从未去过的老街上，你更容易注意到？",
            "options": [
              { "t": "脚下青石板的裂纹、空气中炸臭豆腐的味道。", "s": { "S": 2, "N": 0 } },
              { "t": "店铺招牌的字体设计、行人的穿着搭配。", "s": { "S": 1, "N": 0 } },
              { "t": "这条街的'氛围感'，感觉这里很适合拍电影。", "s": { "S": 0, "N": 1 } },
              { "t": "突然产生既视感，联想到前世或平行时空的自己。", "s": { "S": 0, "N": 2 } }
            ]
          },
        {
            "id": 7,
            "category": "T/F",
            "q": "你认为“权力”的本质是？",
            "options": [
              { "t": "制定规则的资格：能让混乱变为秩序。", "s": { "T": 2, "F": 0 } },
              { "t": "一种可以交换一切的筹码：资源配置的工具。", "s": { "T": 1, "F": 0 } },
              { "t": "一种沉重的责任：意味着你要背负更多人的命运。", "s": { "T": 0, "F": 1 } },
              { "t": "保护所爱之人的能力：除此之外，权力毫无意义。", "s": { "T": 0, "F": 2 } }
            ]
          },
          {
            "id": 8,
            "category": "E/I", // 陌生环境
            "q": "被拉去参加一个全是陌生人的高端酒会，你的状态是？",
            "options": [
              { "t": "如鱼得水，主动出击，结束时加了半个场子的微信。", "s": { "E": 2, "I": 0 } },
              { "t": "虽不主动，但有人搭讪时能谈笑风生，维持体面。", "s": { "E": 1, "I": 0 } },
              { "t": "紧紧跟在带我来的朋友身边，他一走我就慌。", "s": { "E": 0, "I": 1 } },
              { "t": "躲在角落或者阳台，祈祷没人注意到我，甚至想装病溜走。", "s": { "E": 0, "I": 2 } }
            ]
          },
          {
            "id": 9,
            "category": "J/P", // 秩序感
            "q": "你在拼那一幅1000块的拼图，最后发现少了一块，你会？",
            "options": [
              { "t": "无法忍受！立刻联系厂家补发，或者自己做一个补上去。", "s": { "J": 2, "P": 0 } },
              { "t": "把整幅拼图拆掉收回盒子里，眼不见为净。", "s": { "J": 1, "P": 0 } },
              { "t": "就这样挂起来吧，反正远看也看不出来。", "s": { "J": 0, "P": 1 } },
              { "t": "觉得很妙，这块缺失反而让这幅画有了独特的残缺美。", "s": { "J": 0, "P": 2 } }
            ]
          },
          {
            "id": 10,
            "category": "T/F", // 评价偏好
            "q": "你更希望别人用哪个词来形容你？",
            "options": [
              { "t": "强大：无坚不摧，令人敬畏。", "s": { "T": 2, "F": 0 } },
              { "t": "睿智：客观公正，即使有点冷酷。", "s": { "T": 1, "F": 0 } },
              { "t": "温暖：让人如沐春风，善解人意。", "s": { "T": 0, "F": 1 } },
              { "t": "真实：敢爱敢恨，拥有鲜活的灵魂。", "s": { "T": 0, "F": 2 } }
            ]
          },
        {
            "id": 11,
            "category": "S/N", 
            "q": "你认为世间什么东西才是真正“无价”的？",
            "options": [
              { "t": "安全感：它是所有幸福存在的前提。", "s": { "S": 2, "N": 0 } },
              { "t": "时间：它是构成生命本身唯一的不可再生资源。", "s": { "S": 1, "N": 0 } },
              { "t": "爱：它是让荒谬人生变得有意义的唯一救赎。", "s": { "S": 0, "N": 1 } },
              { "t": "自由：若为自由故，两者皆可抛。", "s": { "S": 0, "N": 2 } }
            ]
          },
          {
            "id": 12,
            "category": "E/I", // 表达欲
            "q": "当你发现了一部极好的冷门电影，你会？",
            "options": [
              { "t": "发朋友圈，发群里，按着朋友的头安利给他们。", "s": { "E": 2, "I": 0 } },
              { "t": "推荐给一两个品味相似的朋友，一起讨论。", "s": { "E": 1, "I": 0 } },
              { "t": "写在自己的私密日记或备忘录里，作为宝藏收藏。", "s": { "E": 0, "I": 1 } },
              { "t": "什么都不做，甚至有点私心，希望它永远不要火。", "s": { "E": 0, "I": 2 } }
            ]
          },
          {
            "id": 13,
            "category": "J/P", // 截止日期
            "q": "离任务截止日期（DDL）还有三天，你的进度通常是？",
            "options": [
              { "t": "早就做完了，现在正在进行第三轮检查和优化。", "s": { "J": 2, "P": 0 } },
              { "t": "完成了80%，剩下的按计划每天做一点。", "s": { "J": 1, "P": 0 } },
              { "t": "刚开始动工，但我相信只要压力够大，效率就够高。", "s": { "J": 0, "P": 1 } },
              { "t": "DDL是什么？不到最后一小时我根本没有灵感。", "s": { "J": 0, "P": 2 } }
            ]
          },
          {
            "id": 14,
            "category": "T/F", // 争论
            "q": "在讨论一个社会热点话题时，你更倾向于？",
            "options": [
              { "t": "引用数据、法律条款和历史先例来论证观点。", "s": { "T": 2, "F": 0 } },
              { "t": "分析各方的利益得失，试图找到最优解。", "s": { "T": 1, "F": 0 } },
              { "t": "关注当事人的遭遇，思考社会的人文关怀是否缺失。", "s": { "T": 0, "F": 1 } },
              { "t": "完全代入受害者视角，感到愤怒或悲伤，难以冷静。", "s": { "T": 0, "F": 2 } }
            ]
          },
          {
            "id": 15,
            "category": "S/N", // 抽象概念
            "q": "听到'时间'这个词，你脑海中第一时间浮现的画面是？",
            "options": [
              { "t": "我的手表，或者挂在墙上的电子钟。", "s": { "S": 2, "N": 0 } },
              { "t": "日历上的格子，或者四季的植物变化。", "s": { "S": 1, "N": 0 } },
              { "t": "一条奔流不息的大河，不知流向何方。", "s": { "S": 0, "N": 1 } },
              { "t": "一个巨大的莫比乌斯环，或者达利画中融化的钟表。", "s": { "S": 0, "N": 2 } }
            ]
          },
          {
            "id": 16,
            "category": "J/P", // 手机桌面
            "q": "现在看一下你的手机桌面，它更接近于？",
            "options": [
              { "t": "严格按颜色或功能分类，绝不允许有任何红点（未读）。", "s": { "J": 2, "P": 0 } },
              { "t": "常用软件在第一页，其他的大概知道在哪里。", "s": { "J": 1, "P": 0 } },
              { "t": "有点乱，经常需要用搜索功能找APP，但我不介意。", "s": { "J": 0, "P": 1 } },
              { "t": "完全混乱，还有很多几年前下载但没打开过的软件。", "s": { "J": 0, "P": 2 } }
            ]
          },
          {
            "id": 17,
            "category": "T/F", // 批评
            "q": "上司批评你的方案'虽然逻辑完美，但缺乏人情味'，你会？",
            "options": [
              { "t": "心里翻白眼：工作就是讲效率，人情味能当饭吃吗？", "s": { "T": 2, "F": 0 } },
              { "t": "思考如何用技术的手段去模拟'人情味'来应付。", "s": { "T": 1, "F": 0 } },
              { "t": "感到抱歉，意识到自己确实忽略了用户的感受。", "s": { "T": 0, "F": 1 } },
              { "t": "很受打击，觉得自己的初衷被误解了，难过很久。", "s": { "T": 0, "F": 2 } }
            ]
          },
          {
            "id": 18,
            "category": "S/N", // 电影偏好
            "q": "如果今晚只能看一部电影，你会选择？",
            "options": [
              { "t": "《荒野求生》纪录片：真实的生存技巧，高清的自然风光。", "s": { "S": 2, "N": 0 } },
              { "t": "《华尔街之狼》：基于真实事件改编的传记故事。", "s": { "S": 1, "N": 0 } },
              { "t": "《盗梦空间》：烧脑，逻辑复杂，探讨梦境结构。", "s": { "S": 0, "N": 1 } },
              { "t": "《星际穿越》：关于爱、五维空间、相对论的宏大叙事。", "s": { "S": 0, "N": 2 } }
            ]
          },
          {
            "id": 19,
            "category": "E/I", // 团队合作
            "q": "团队头脑风暴时，你通常是？",
            "options": [
              { "t": "那个拿着马克笔站在白板前，大声引导讨论的人。", "s": { "E": 2, "I": 0 } },
              { "t": "积极发言，哪怕想法还不成熟也愿意分享出来。", "s": { "E": 1, "I": 0 } },
              { "t": "大部分时间在听，等到关键时刻才说出深思熟虑的观点。", "s": { "E": 0, "I": 1 } },
              { "t": "希望能通过邮件交流，而不是这种吵闹的即时会议。", "s": { "E": 0, "I": 2 } }
            ]
          },
          {
            "id": 20,
            "category": "Final", // 终极追求
            "q": "当你老了，坐在摇椅上回顾一生，你更希望自己？",
            "options": [
              { "t": "掌控了一切：我建立了秩序，留下了丰功伟绩。", "s": { "J": 1, "T": 1 } },
              { "t": "体验了一切：我走遍了世界，尝遍了酸甜苦辣。", "s": { "P": 1, "S": 1 } },
              { "t": "理解了一切：我洞察了真理，活得通透而清醒。", "s": { "N": 1, "T": 1 } },
              { "t": "爱过也被爱过：我拥有最真挚的羁绊，没有遗憾。", "s": { "F": 1, "E": 1 } }
            ]
          }
        ];

        // 60题库 (从 quiz_data_60.js 导入)
        const questions_60 = [
          // === E/I 维度（5题） ===
          {
            id: 1,
            category: "E/I",
            q: "如果你的灵魂是一束光，你更希望它照亮哪里？",
            options: [
              { t: "狂欢的舞台中央，让所有人看见我的存在。", s: { "E": 2, "I": 0 } },
              { t: "朋友聚会的圆桌，温暖几个重要的灵魂。", s: { "E": 1, "I": 0 } },
              { t: "只照亮自己的书桌，足以看清脚下的路就好。", s: { "E": 0, "I": 1 } },
              { t: "藏在深海里，成为只有我自己知道的荧光。", s: { "E": 0, "I": 2 } }
            ]
          },
          {
            id: 2,
            category: "E/I",
            q: "在一个需要等待的冗长队伍中，你会？",
            options: [
              { t: "主动和前后的人聊天，时间会在交谈中飞逝。", s: { "E": 2, "I": 0 } },
              { t: "观察周围有趣的人，在心里给他们编故事。", s: { "E": 1, "I": 0 } },
              { t: "戴上耳机沉浸在自己的世界，隔绝外界杂音。", s: { "E": 0, "I": 1 } },
              { t: "感到生理不适，宁愿放弃排队离开。", s: { "E": 0, "I": 2 } }
            ]
          },
          {
            id: 3,
            category: "E/I",
            q: "当你脑海中冒出一个荒谬但有趣的想法时，你会？",
            options: [
              { t: "立刻发到所有社交平台，看谁的反应最有趣。", s: { "E": 2, "I": 0 } },
              { t: "在几个活跃的群里分享，引发小型讨论。", s: { "E": 1, "I": 0 } },
              { t: "写进私人日记，或许某天会把它写成小说。", s: { "E": 0, "I": 1 } },
              { t: "它在脑海中自生自灭，说出来就失去了魔力。", s: { "E": 0, "I": 2 } }
            ]
          },
          {
            id: 4,
            category: "E/I",
            q: "如果人生是一部电影，你更倾向担任？",
            options: [
              { t: "主角，拥有最多台词和镜头，故事因我而转动。", s: { "E": 2, "I": 0 } },
              { t: "重要的配角，在关键时刻推动剧情。", s: { "E": 1, "I": 0 } },
              { t: "旁白，冷静观察并解说一切。", s: { "E": 0, "I": 1 } },
              { t: "观众，坐在黑暗中感受故事，散场后无人知晓我来过。", s: { "E": 0, "I": 2 } }
            ]
          },
          {
            id: 5,
            category: "E/I",
            q: "周末早晨醒来，你发现手机里躺着20条未读消息，你会？",
            options: [
              { t: "兴奋地点开，每条都认真回复，然后开启新话题。", s: { "E": 2, "I": 0 } },
              { t: "先浏览一遍，只回复重要的，其余发个表情包。", s: { "E": 1, "I": 0 } },
              { t: "感到压力，先放一边，等想回的时候再回。", s: { "E": 0, "I": 1 } },
              { t: "直接开启免打扰模式，假装没看见。", s: { "E": 0, "I": 2 } }
            ]
          },

          // === S/N 维度（5题） ===
          {
            id: 6,
            category: "S/N",
            q: "当你凝视一片落叶时，你更可能看见什么？",
            options: [
              { t: "叶脉的走向、虫蛀的孔洞、颜色的渐变层次。", s: { "S": 2, "N": 0 } },
              { t: "这是银杏叶，秋天了，该加衣服了。", s: { "S": 1, "N": 0 } },
              { t: "一叶知秋，万物终将逝去，但会重生。", s: { "S": 0, "N": 1 } },
              { t: "它是风的信使，从某个平行世界寄来的书签。", s: { "S": 0, "N": 2 } }
            ]
          },
          {
            id: 7,
            category: "S/N",
            q: "朋友送你一份包装精美的礼物，拆封时你的注意力在？",
            options: [
              { t: "包装纸的纹理、丝带的系法、盒子的重量。", s: { "S": 2, "N": 0 } },
              { t: "猜测礼物是什么，通过晃动和重量判断。", s: { "S": 1, "N": 0 } },
              { t: "他选择这个礼物时的心情，以及我们之间的默契。", s: { "S": 0, "N": 1 } },
              { t: "这个仪式本身的意义，为什么人类需要惊喜。", s: { "S": 0, "N": 2 } }
            ]
          },
          {
            id: 8,
            category: "S/N",
            q: "面对一道没有标准答案的哲学思考题，你会？",
            options: [
              { t: "查阅历史上各位哲学家的具体观点来佐证。", s: { "S": 2, "N": 0 } },
              { t: "分析这个问题的现实背景和提出者的意图。", s: { "S": 1, "N": 0 } },
              { t: "闭上眼睛，让各种可能性在脑海中碰撞。", s: { "S": 0, "N": 1 } },
              { t: "创造一个全新的概念体系来重新定义这个问题。", s: { "S": 0, "N": 2 } }
            ]
          },
          {
            id: 9,
            category: "S/N",
            q: "你听一段从未听过的音乐时，最先被什么吸引？",
            options: [
              { t: "乐器的音色、演奏技巧、编曲的层次细节。", s: { "S": 2, "N": 0 } },
              { t: "这是爵士还是蓝调？属于什么年代的风格？", s: { "S": 1, "N": 0 } },
              { t: "音乐营造的氛围，它让我想起某个场景。", s: { "S": 0, "N": 1 } },
              { t: "音符背后的情绪流动，像阅读一篇无字的故事。", s: { "S": 0, "N": 2 } }
            ]
          },
          {
            id: 10,
            category: "S/N",
            q: "在一个陌生城市的街头，什么会让你驻足？",
            options: [
              { t: "精致的橱窗陈列、街头艺人的具体表演技巧。", s: { "S": 2, "N": 0 } },
              { t: "路牌上的城市历史介绍、地图上的精准坐标。", s: { "S": 1, "N": 0 } },
              { t: "这座城市独特的'气质'，像人一样有性格。", s: { "S": 0, "N": 1 } },
              { t: "突然感觉这一瞬间曾在梦里预演过的奇妙既视感。", s: { "S": 0, "N": 2 } }
            ]
          },

          // === T/F 维度（5题） ===
          {
            id: 11,
            category: "T/F",
            q: "当你发现朋友在众人面前说了一个低级的知识性错误，你会？",
            options: [
              { t: "立刻当众纠正，真理比面子更重要。", s: { "T": 2, "F": 0 } },
              { t: "私下发消息告诉他，避免他下次再犯错。", s: { "T": 1, "F": 0 } },
              { t: "不纠正，但事后用委婉的方式暗示他。", s: { "T": 0, "F": 1 } },
              { t: "假装没听见，保护他的自尊心优先。", s: { "T": 0, "F": 2 } }
            ]
          },
          {
            id: 12,
            category: "T/F",
            q: "团队项目失败复盘时，你的第一反应是寻找？",
            options: [
              { t: "流程中的逻辑漏洞和资源分配错误。", s: { "T": 2, "F": 0 } },
              { t: "决策模型中的系统性偏差。", s: { "T": 1, "F": 0 } },
              { t: "成员的情绪状态和协作氛围问题。", s: { "T": 0, "F": 1 } },
              { t: "谁最需要安慰和鼓励，失败对谁打击最大。", s: { "T": 0, "F": 2 } }
            ]
          },
          {
            id: 13,
            category: "T/F",
            q: "你制定规则时，更注重它的？",
            options: [
              { t: "公平性和普适性，对所有人一视同仁。", s: { "T": 2, "F": 0 } },
              { t: "效率和可操作性，减少模糊地带。", s: { "T": 1, "F": 0 } },
              { t: "灵活性和人性化，允许特殊情况特殊处理。", s: { "T": 0, "F": 1 } },
              { t: "对每个个体的关怀度，是否让弱者也被善待。", s: { "T": 0, "F": 2 } }
            ]
          },
          {
            id: 14,
            category: "T/F",
            q: "当理性告诉你'应该'但感性告诉你'想要'时，你？",
            options: [
              { t: "几乎总是听从理性的分析，哪怕痛苦。", s: { "T": 2, "F": 0 } },
              { t: "用理性去说服感性，直到内心达成和解。", s: { "T": 1, "F": 0 } },
              { t: "给感性一个权重，如果足够强烈就跟随内心。", s: { "T": 0, "F": 1 } },
              { t: "跟随感觉走，理性会找到适应的方式。", s: { "T": 0, "F": 2 } }
            ]
          },
          {
            id: 15,
            category: "T/F",
            q: "朋友向你倾诉失恋痛苦，你会如何回应？",
            options: [
              { t: "分析这段关系失败的根本原因和双方责任。", s: { "T": 2, "F": 0 } },
              { t: "给出具体建议，比如如何转移注意力、多久能走出来。", s: { "T": 1, "F": 0 } },
              { t: "安静地倾听，让他知道你在陪他一起难过。", s: { "T": 0, "F": 1 } },
              { t: "陪他痛骂前任，感同身受他的委屈。", s: { "T": 0, "F": 2 } }
            ]
          },
          {
            id: 16,
            category: "E/I",
            q: "当你独自完成了一件值得骄傲的事，你最深层的渴望是？",
            options: [
              { t: "立刻召开新闻发布会，让全世界知道。", s: { "E": 2, "I": 0 } },
              { t: "在社交媒体上精心编辑后分享，收获点赞。", s: { "E": 1, "I": 0 } },
              { t: "只告诉最亲密的一两个人，他们的认可才重要。", s: { "E": 0, "I": 1 } },
              { t: "谁也不说，将其封装成只属于自己的秘密勋章。", s: { "E": 0, "I": 2 } }
            ]
          },
          {
            id: 17,
            category: "E/I",
            q: "什么样的环境会让你感到精力充沛？",
            options: [
              { t: "人声鼎沸的市集，每个人都在交换故事。", s: { "E": 2, "I": 0 } },
              { t: "小型沙龙，三四人深度对话，思想碰撞。", s: { "E": 1, "I": 0 } },
              { t: "图书馆或咖啡馆，周围有人但互不打扰。", s: { "E": 0, "I": 1 } },
              { t: "完全属于自己的隔音房间，连呼吸声都清晰可闻。", s: { "E": 0, "I": 2 } }
            ]
          },
          {
            id: 18,
            category: "E/I",
            q: "你更认同哪种存在方式？",
            options: [
              { t: "我是众人眼中的我，失去观众，我便不存在。", s: { "E": 2, "I": 0 } },
              { t: "我是我所爱之人心中的我，他们的记忆构成我的轮廓。", s: { "E": 1, "I": 0 } },
              { t: "我是我眼中的我，与他人的评价无关。", s: { "E": 0, "I": 1 } },
              { t: "我不需要定义，我即是我，无需向任何人证明。", s: { "E": 0, "I": 2 } }
            ]
          },
          {
            id: 19,
            category: "E/I",
            q: "当你被误解时，你的第一反应是？",
            options: [
              { t: "立刻召集所有人澄清，不能让误解发酵。", s: { "E": 2, "I": 0 } },
              { t: "向关键人物解释，只要重要的人理解我就够了。", s: { "E": 1, "I": 0 } },
              { t: "相信时间会证明一切，懒得浪费口舌。", s: { "E": 0, "I": 1 } },
              { t: "误解是常态，被理解才是奢侈，我早已习惯。", s: { "E": 0, "I": 2 } }
            ]
          },
          {
            id: 20,
            category: "E/I",
            q: "记忆对你来说更像什么？",
            options: [
              { t: "共享相册，需要朋友们一起填满才完整。", s: { "E": 2, "I": 0 } },
              { t: "朋友圈，偶尔翻出来回味，也期待别人点赞。", s: { "E": 1, "I": 0 } },
              { t: "加密的硬盘，只有自己有密码。", s: { "E": 0, "I": 1 } },
              { t: "脑内保险箱，钥匙已经被我扔掉了。", s: { "E": 0, "I": 2 } }
            ]
          },
          {
            id: 21,
            category: "E/I",
            q: "你如何处理社交后的疲惫感？",
            options: [
              { t: "我不需要处理，社交本身就是充电。", s: { "E": 2, "I": 0 } },
              { t: "短暂休息半小时，就能满血复活。", s: { "E": 1, "I": 0 } },
              { t: "需要独处几个小时，甚至一整天来恢复。", s: { "E": 0, "I": 1 } },
              { t: "社交后的疲惫是永久性的，需要数周才能复原。", s: { "E": 0, "I": 2 } }
            ]
          },
          {
            id: 22,
            category: "E/I",
            q: "你更倾向于如何认识新朋友？",
            options: [
              { t: "主动搭讪，我喜欢做破冰的那个人。", s: { "E": 2, "I": 0 } },
              { t: "通过朋友介绍，有共同话题更容易展开。", s: { "E": 1, "I": 0 } },
              { t: "等待对方主动，我通常处于观察状态。", s: { "E": 0, "I": 1 } },
              { t: "我不需要新朋友，现有关系网已足够。", s: { "E": 0, "I": 2 } }
            ]
          },
          {
            id: 23,
            category: "E/I",
            q: "当你成为焦点时，你的感觉是？",
            options: [
              { t: "如鱼得水，肾上腺素飙升。", s: { "E": 2, "I": 0 } },
              { t: "享受片刻，但希望焦点能轮流转换。", s: { "E": 1, "I": 0 } },
              { t: "微微不适，希望尽快结束。", s: { "E": 0, "I": 1 } },
              { t: "如坐针毡，想立刻消失。", s: { "E": 0, "I": 2 } }
            ]
          },
          {
            id: 24,
            category: "E/I",
            q: "你如何处理灵感的火花？",
            options: [
              { t: "立刻说出来，在表达中让它燃烧得更旺。", s: { "E": 2, "I": 0 } },
              { t: "先和信任的人分享，讨论中完善它。", s: { "E": 1, "I": 0 } },
              { t: "写在备忘录里，独自酝酿成熟后再说。", s: { "E": 0, "I": 1 } },
              { t: "让它在脑中自然生长，说出来的瞬间就会枯萎。", s: { "E": 0, "I": 2 } }
            ]
          },
          {
            id: 25,
            category: "E/I",
            q: "社交软件对你来说更像？",
            options: [
              { t: "舞台，我的每个动态都是精心设计的演出。", s: { "E": 2, "I": 0 } },
              { t: "客厅，朋友来去自如，偶尔分享生活。", s: { "E": 1, "I": 0 } },
              { t: "信箱，定期查看但很少主动投递。", s: { "E": 0, "I": 1 } },
              { t: "监控摄像头，我宁愿不被任何人看见。", s: { "E": 0, "I": 2 } }
            ]
          },

          // === S/N 维度（续 10题） ===
          {
            id: 26,
            category: "S/N",
            q: "解读一首诗时，你更关注？",
            options: [
              { t: "每个意象的具体出处和典故，逐字解析。", s: { "S": 2, "N": 0 } },
              { t: "诗歌的创作背景和诗人的生平经历。", s: { "S": 1, "N": 0 } },
              { t: "整体意境带来的情绪共鸣，言外之意。", s: { "S": 0, "N": 1 } },
              { t: "这首诗在我脑海中激发的全新意象流。", s: { "S": 0, "N": 2 } }
            ]
          },
          {
            id: 27,
            category: "S/N",
            q: "学习一项新技能时，你更看重？",
            options: [
              { t: "具体的操作步骤和标准动作要领。", s: { "S": 2, "N": 0 } },
              { t: "前人总结的经验口诀和避坑指南。", s: { "S": 1, "N": 0 } },
              { t: "理解底层原理，自己推导最佳实践。", s: { "S": 0, "N": 1 } },
              { t: "创造属于自己的独特方法论。", s: { "S": 0, "N": 2 } }
            ]
          },
          {
            id: 28,
            category: "S/N",
            q: "面对一个复杂问题，你的思考方式是？",
            options: [
              { t: "拆解成最小单元，逐一分析解决。", s: { "S": 2, "N": 0 } },
              { t: "寻找相似案例，参考已有的解决方案。", s: { "S": 1, "N": 0 } },
              { t: "在脑中构建模型，看各因素如何相互作用。", s: { "S": 0, "N": 1 } },
              { t: "跳出框架，重新定义问题本身。", s: { "S": 0, "N": 2 } }
            ]
          },
          {
            id: 29,
            category: "S/N",
            q: "旅行前做攻略，你的风格是？",
            options: [
              { t: "精确到小时，每个景点距离、开放时间、门票都列清。", s: { "S": 2, "N": 0 } },
              { t: "规划主要路线，留一些弹性时间给意外发现。", s: { "S": 1, "N": 0 } },
              { t: "只定起点和终点，过程交给直觉和缘分。", s: { "S": 0, "N": 1 } },
              { t: "不做攻略，迷路本身就是旅行的意义。", s: { "S": 0, "N": 2 } }
            ]
          },
          {
            id: 30,
            category: "S/N",
            q: "记忆一个陌生人的面孔时，你更可能记住？",
            options: [
              { t: "五官的具体特征、痣的位置、瞳孔颜色。", s: { "S": 2, "N": 0 } },
              { t: "整体气质和穿着风格，像不像某个明星。", s: { "S": 1, "N": 0 } },
              { t: "他带给你的感觉，阳光还是阴郁。", s: { "S": 0, "N": 1 } },
              { t: "你脑中为他编织的身份故事，他是谁，从哪来。", s: { "S": 0, "N": 2 } }
            ]
          },
          {
            id: 31,
            category: "S/N",
            q: "描述'爱'这个概念时，你更倾向？",
            options: [
              { t: "列举具体行为：记得纪念日、做早餐、倾听。", s: { "S": 2, "N": 0 } },
              { t: "引用心理学定义和依恋类型理论。", s: { "S": 1, "N": 0 } },
              { t: "用比喻：像空气，看不见但不可或缺。", s: { "S": 0, "N": 1 } },
              { t: "提出自己的哲学框架，重新定义爱是什么。", s: { "S": 0, "N": 2 } }
            ]
          },
          {
            id: 32,
            category: "S/N",
            q: "观察云朵时，你的思维会？",
            options: [
              { t: "判断这是积雨云还是卷云，会不会下雨。", s: { "S": 2, "N": 0 } },
              { t: "想起梵高的《星月夜》或某部电影的云镜头。", s: { "S": 1, "N": 0 } },
              { t: "感觉云的形状在诉说某种情绪。", s: { "S": 0, "N": 1 } },
              { t: "想象云之上是否存在另一个维度的文明。", s: { "S": 0, "N": 2 } }
            ]
          },
          {
            id: 33,
            category: "S/N",
            q: "阅读一份数据报告时，你首先关注？",
            options: [
              { t: "具体数字、图表刻度、样本量是否足够。", s: { "S": 2, "N": 0 } },
              { t: "数据来源是否权威，统计方法是否科学。", s: { "S": 1, "N": 0 } },
              { t: "数据背后的趋势和潜在模式。", s: { "S": 0, "N": 1 } },
              { t: "这些数据如何颠覆了我对世界的认知框架。", s: { "S": 0, "N": 2 } }
            ]
          },
          {
            id: 34,
            category: "S/N",
            q: "回忆童年时，你更可能想起什么？",
            options: [
              { t: "具体事件的时间、地点、当时穿的什么衣服。", s: { "S": 2, "N": 0 } },
              { t: "某个夏天蝉鸣的声音，或某种食物的味道。", s: { "S": 1, "N": 0 } },
              { t: "那种无忧无虑的感觉，但具体细节模糊了。", s: { "S": 0, "N": 1 } },
              { t: "童年作为'失去的天堂'对我的塑造意义。", s: { "S": 0, "N": 2 } }
            ]
          },
          {
            id: 35,
            category: "S/N",
            q: "面对一件艺术品，什么最能打动你？",
            options: [
              { t: "精湛的技法、材质运用、透视的准确性。", s: { "S": 2, "N": 0 } },
              { t: "艺术家创作时的时代背景和生平故事。", s: { "S": 1, "N": 0 } },
              { t: "它唤起的情绪共鸣，想哭或想微笑的冲动。", s: { "S": 0, "N": 1 } },
              { t: "它如何挑战了艺术本身的定义，开创了新可能。", s: { "S": 0, "N": 2 } }
            ]
          },

          // === T/F 维度（续 10题） ===
          {
            id: 36,
            category: "T/F",
            q: "你对'正义'的理解更接近？",
            options: [
              { t: "绝对的规则面前人人平等，不容例外。", s: { "T": 2, "F": 0 } },
              { t: "程序正义优先，过程合法比什么都重要。", s: { "T": 1, "F": 0 } },
              { t: "要顾及每个个案的特殊情况和人情冷暖。", s: { "T": 0, "F": 1 } },
              { t: "保护弱者就是正义，结果比程序更重要。", s: { "T": 0, "F": 2 } }
            ]
          },
          {
            id: 37,
            category: "T/F",
            q: "面对朋友的明显错误决定，你会做到哪一步？",
            options: [
              { t: "直言不讳，哪怕翻脸也要阻止他犯错。", s: { "T": 2, "F": 0 } },
              { t: "冷静分析利弊，把选择权交给他自己。", s: { "T": 1, "F": 0 } },
              { t: "虽不支持但会陪伴，在他失败后接住他。", s: { "T": 0, "F": 1 } },
              { t: "无条件支持，他的感受比正确更重要。", s: { "T": 0, "F": 2 } }
            ]
          },
          {
            id: 38,
            category: "T/F",
            q: "评价一部电影时，什么更重要？",
            options: [
              { t: "叙事结构是否严谨，逻辑有无漏洞。", s: { "T": 2, "F": 0 } },
              { t: "导演手法和镜头语言的专业性。", s: { "T": 1, "F": 0 } },
              { t: "角色是否真实可信，情感是否动人。", s: { "T": 0, "F": 1 } },
              { t: "它是否触动了我内心最柔软的部分。", s: { "T": 0, "F": 2 } }
            ]
          },
          {
            id: 39,
            category: "T/F",
            q: "你如何处理与他人的观念冲突？",
            options: [
              { t: "坚持真理，通过辩论让对方心服口服。", s: { "T": 2, "F": 0 } },
              { t: "求同存异，聚焦在共同认可的部分。", s: { "T": 1, "F": 0 } },
              { t: "理解对方的立场，哪怕我无法接受。", s: { "T": 0, "F": 1 } },
              { t: "避免冲突，哪怕隐藏自己的真实想法。", s: { "T": 0, "F": 2 } }
            ]
          },
          {
            id: 40,
            category: "T/F",
            q: "什么会让你感到真正的愤怒？",
            options: [
              { t: "逻辑混乱、效率低下、缺乏专业精神。", s: { "T": 2, "F": 0 } },
              { t: "不守规则、破坏秩序、系统性不公。", s: { "T": 1, "F": 0 } },
              { t: "他人的痛苦被漠视、真诚被玩弄。", s: { "T": 0, "F": 1 } },
              { t: "看到弱者被欺负、善良被辜负。", s: { "T": 0, "F": 2 } }
            ]
          },
          {
            id: 41,
            category: "T/F",
            q: "你认为理想的社会应该由什么驱动？",
            options: [
              { t: "数据和算法，最理性的决策是最高效。", s: { "T": 2, "F": 0 } },
              { t: "明确的规则和法律，人人依规行事。", s: { "T": 1, "F": 0 } },
              { t: "人与人之间的信任与共情。", s: { "T": 0, "F": 1 } },
              { t: "爱与关怀，让每个个体都感到被珍视。", s: { "T": 0, "F": 2 } }
            ]
          },
          {
            id: 42,
            category: "T/F",
            q: "你如何处理自己的负面情绪？",
            options: [
              { t: "分析情绪来源，用理性逻辑化解它。", s: { "T": 2, "F": 0 } },
              { t: "制定解决方案，解决导致情绪的问题。", s: { "T": 1, "F": 0 } },
              { t: "允许自己沉浸在情绪中，感受它的流动。", s: { "T": 0, "F": 1 } },
              { t: "找人倾诉，在连接中疗愈自己。", s: { "T": 0, "F": 2 } }
            ]
          },
          {
            id: 43,
            category: "T/F",
            q: "你认为人生的意义在于？",
            options: [
              { t: "理解世界运行的客观规律，接近真理。", s: { "T": 2, "F": 0 } },
              { t: "创造价值，留下能衡量的成就。", s: { "T": 1, "F": 0 } },
              { t: "体验丰富的情感，建立深刻的羁绊。", s: { "T": 0, "F": 1 } },
              { t: "爱与被爱，在关系中成为更好的自己。", s: { "T": 0, "F": 2 } }
            ]
          },
          {
            id: 44,
            category: "T/F",
            q: "面对公共资源分配，你更看重？",
            options: [
              { t: "按贡献度分配，多劳多得。", s: { "T": 2, "F": 0 } },
              { t: "按规则抽签，机会平等。", s: { "T": 1, "F": 0 } },
              { t: "优先照顾最需要它的人。", s: { "T": 0, "F": 1 } },
              { t: "让每个人都能感受到被关怀。", s: { "T": 0, "F": 2 } }
            ]
          },
          {
            id: 45,
            category: "T/F",
            q: "什么会让你感到最有成就感？",
            options: [
              { t: "解决了别人无法解决的复杂问题。", s: { "T": 2, "F": 0 } },
              { t: "建立了高效运转的系统或模型。", s: { "T": 1, "F": 0 } },
              { t: "帮助某人走出了人生低谷。", s: { "T": 0, "F": 1 } },
              { t: "让别人因为我而感到幸福。", s: { "T": 0, "F": 2 } }
            ]
          },

          // === J/P 维度（12题） ===
          {
            id: 46,
            category: "J/P",
            q: "你如何看待'计划赶不上变化'？",
            options: [
              { t: "这说明计划做得不够周密，要增加预案。", s: { "J": 2, "P": 0 } },
              { t: "计划要留有余量，才能应对变化。", s: { "J": 1, "P": 0 } },
              { t: "这正是计划的局限，必须保持灵活。", s: { "J": 0, "P": 1 } },
              { t: "所以计划本身就没有意义，随性而为更好。", s: { "J": 0, "P": 2 } }
            ]
          },
          {
            id: 47,
            category: "J/P",
            q: "你的电脑文件夹结构是？",
            options: [
              { t: "超过五层嵌套，每个文件都有精确归宿。", s: { "J": 2, "P": 0 } },
              { t: "按项目分类，大致知道在哪里。", s: { "J": 1, "P": 0 } },
              { t: "只有几个大类，搜索功能才是生产力。", s: { "J": 0, "P": 1 } },
              { t: "大部分在桌面，需要时翻找也很有趣。", s: { "J": 0, "P": 2 } }
            ]
          },
          {
            id: 48,
            category: "J/P",
            q: "面对一个开放性的项目，你会？",
            options: [
              { t: "先制定详细的里程碑和交付物清单。", s: { "J": 2, "P": 0 } },
              { t: "列出关键节点，边做边细化。", s: { "J": 1, "P": 0 } },
              { t: "先动手试试，方向会在过程中显现。", s: { "J": 0, "P": 1 } },
              { t: "享受彻底的不确定性，方向本身就是束缚。", s: { "J": 0, "P": 2 } }
            ]
          },
          {
            id: 49,
            category: "J/P",
            q: "你如何对待承诺？",
            options: [
              { t: "承诺即契约，无论如何都要兑现。", s: { "J": 2, "P": 0 } },
              { t: "会尽力完成，但允许在不可抗力下调整。", s: { "J": 1, "P": 0 } },
              { t: "承诺时是真心的，但情况变了也没办法。", s: { "J": 0, "P": 1 } },
              { t: "从不轻易承诺，给自己留足余地。", s: { "J": 0, "P": 2 } }
            ]
          },
          {
            id: 50,
            category: "J/P",
            q: "你的购物习惯是？",
            options: [
              { t: "列清单，按计划购买，绝不冲动消费。", s: { "J": 2, "P": 0 } },
              { t: "大致有目标，但看到合适的也会调整。", s: { "J": 1, "P": 0 } },
              { t: "逛到哪买到哪，享受发现的乐趣。", s: { "J": 0, "P": 1 } },
              { t: "买的东西都是偶然邂逅，计划会破坏惊喜。", s: { "J": 0, "P": 2 } }
            ]
          },
          {
            id: 51,
            category: "J/P",
            q: " deadline（截止日期）对你来说是？",
            options: [
              { t: "神圣的终点线，提前三天就准备好提交。", s: { "J": 2, "P": 0 } },
              { t: "重要的参考线，会努力提前完成。", s: { "J": 1, "P": 0 } },
              { t: "弹性建议线，最后一刻灵感最充沛。", s: { "J": 0, "P": 1 } },
              { t: "不存在的线，交付成果不由时间定义。", s: { "J": 0, "P": 2 } }
            ]
          },
          {
            id: 52,
            category: "J/P",
            q: "你如何处理未完成事项？",
            options: [
              { t: "列成清单，每晚检查打勾，必须清零。", s: { "J": 2, "P": 0 } },
              { t: "记在待办里，会优先完成最重要的。", s: { "J": 1, "P": 0 } },
              { t: "大致记在心里，想起来就做。", s: { "J": 0, "P": 1 } },
              { t: "相信真正重要的事不会忘记，没做就是不需要。", s: { "J": 0, "P": 2 } }
            ]
          },
          {
            id: 53,
            category: "J/P",
            q: "你的休闲时间是？",
            options: [
              { t: "严格规划，阅读、运动、学习各有时段。", s: { "J": 2, "P": 0 } },
              { t: "有大致安排，但允许临时调整。", s: { "J": 1, "P": 0 } },
              { t: "完全空白，看当时心情做什么。", s: { "J": 0, "P": 1 } },
              { t: "抗拒规划，被安排就失去了休闲的意义。", s: { "J": 0, "P": 2 } }
            ]
          },
          {
            id: 54,
            category: "J/P",
            q: "你如何看待即兴决定？",
            options: [
              { t: "缺乏责任感的表现，必须避免。", s: { "J": 2, "P": 0 } },
              { t: "偶尔可以接受，但要有预案。", s: { "J": 1, "P": 0 } },
              { t: "生活的调味剂，带来活力。", s: { "J": 0, "P": 1 } },
              { t: "最高级的智慧，顺应生命之流。", s: { "J": 0, "P": 2 } }
            ]
          },
          {
            id: 55,
            category: "J/P",
            q: "你的理想生活更接近？",
            options: [
              { t: "高度自律，每一天都执行精密的人生计划。", s: { "J": 2, "P": 0 } },
              { t: "有长期目标，分解为可执行的阶段性任务。", s: { "J": 1, "P": 0 } },
              { t: "有方向但无计划，享受沿途的风景。", s: { "J": 0, "P": 1 } },
              { t: "彻底臣服于未知，让命运执笔写人生。", s: { "J": 0, "P": 2 } }
            ]
          },
          {
            id: 56,
            category: "J/P",
            q: "整理物品时，你的原则是？",
            options: [
              { t: "断舍离，每件物品必须有固定位置和用途。", s: { "J": 2, "P": 0 } },
              { t: "分类收纳，常用物品易取，不常用的存起来。", s: { "J": 1, "P": 0 } },
              { t: "大致归位，能找到就行，不必太整齐。", s: { "J": 0, "P": 1 } },
              { t: "混乱是创造力的温床，整齐反而找不到东西。", s: { "J": 0, "P": 2 } }
            ]
          },
          {
            id: 57,
            category: "J/P",
            q: "你如何对待人生转折点？",
            options: [
              { t: "提前数年规划，确保万无一失。", s: { "J": 2, "P": 0 } },
              { t: "有备选方案ABC，根据情况切换。", s: { "J": 1, "P": 0 } },
              { t: "车到山前必有路，相信适应能力。", s: { "J": 0, "P": 1 } },
              { t: "转折点就是用来颠覆计划的。", s: { "J": 0, "P": 2 } }
            ]
          },

          // === 综合维度（3题） ===
          {
            id: 58,
            category: "Final",
            q: "如果神明允许你改造世界，你会优先？",
            options: [
              { t: "建立完美的规则体系，让一切井然有序。", s: { "J": 1, "T": 1 } },
              { t: "创造无限可能，让每个人都能自由探索。", s: { "P": 1, "N": 1 } },
              { t: "让人与人之间充满理解与温情。", s: { "F": 1, "E": 1 } },
              { t: "赋予每个人深度独处与自我探索的空间。", s: { "I": 1, "S": 1 } }
            ]
          },
        {
            "id": 59,
            "category": "Final", 
            "q": "在生命的尽头，你回望一生，最让你感到自豪的是？",
            "options": [
              { "t": "我达到了无人企及的高度，在这个世界留下了名字。", "s": { "J": 1, "T": 1 } }, 
              { "t": "我过得舒适安逸，没留下什么遗憾，也没有受苦。", "s": { "S": 1, "P": 1 } },  
              { "t": "我从未背叛过我自己，始终忠于内心的真实。", "s": { "N": 1, "I": 1 } },     
              { "t": "我用生命守护了我爱的一切，没有辜负他人。", "s": { "F": 1, "E": 1 } }    
            ]
          },
          {
            id: 60,
            category: "Final",
            q: "当你最终离开世界时，你希望如何被记住？",
            options: [
              { t: "一个建立了秩序、留下了成就的人。", s: { "J": 1, "T": 1 } },
              { t: "一个充满灵感、生活精彩纷呈的人。", s: { "P": 1, "N": 1 } },
              { t: "一个爱过很多、也被很多人爱的人。", s: { "F": 1, "E": 1 } },
              { t: "一个忠于自我、拥有独特灵魂的人。", s: { "I": 1, "S": 1 } }
            ]
          }
        ];
        
        // 动物数据 (保持原样)
        const animals = {
            "snow_leopard": { name: "雪豹", icon: "🐆", slogan: "孤高的雪山哲人", tags: ["独立", "逻辑怪", "极客"], color: "from-gray-700 to-gray-900", analysis: "你的思维宫殿精密而宏大。你就像栖息在雪线之上的雪豹，对世俗的热闹不感兴趣，却对世界运行的底层逻辑着迷。你拥有极强的抽象思维能力，善于解构复杂问题。", social: "社交极简主义者。你不需要泛泛之交，更喜欢高质量的一对一深度对谈。", energy: "独处是你最好的充电方式。解开一个谜题、钻研一项新技术。", shadow: "当压力过大时，你可能会陷入'分析瘫痪'，过度纠结细节而无法行动。" },
            "owl": { name: "仓鸮", icon: "🦉", slogan: "暗夜的战略家", tags: ["全知视角", "完美主义", "高冷"], color: "from-indigo-900 to-slate-900", analysis: "你是天生的战略家，总是站在上帝视角审视一切。你极其崇尚逻辑和效率，对平庸和低效零容忍。你像仓鸮一样，在黑夜中保持绝对清醒。", social: "你对社交圈的筛选极其严格，'智性恋'倾向明显。", energy: "当你能够掌控局面，并按照自己的计划推进事物时，你会感到能量满满。", shadow: "在极端压力下，你可能会变得傲慢、独断专行。" },
            "lion": { name: "狮子", icon: "🦁", slogan: "荣耀荒原的王者", tags: ["天生领袖", "霸气", "目标感"], color: "from-yellow-700 to-red-900", analysis: "你天生就是主角。你拥有强大的气场和不容置疑的领导力，能够迅速在混乱中建立秩序。你野心勃勃，目光长远。", social: "你是聚会的核心，擅长调动气氛和资源。你喜欢结交强者。", energy: "带领团队打赢胜仗、解决高难度挑战、获得公众的认可。", shadow: "当事情失控时，你可能会变得暴躁、攻击性强。" },
            "fox": { name: "赤狐", icon: "🦊", slogan: "狡黠的破局者", tags: ["脑洞大", "反骨", "机智"], color: "from-orange-600 to-red-700", analysis: "你是规则的挑战者。你思维敏捷，擅长从刁钻的角度看待问题。你讨厌一成不变，喜欢用恶作剧或激烈的辩论来测试底线。", social: "你是社交场上的'搅局者'，擅长活跃气氛，也擅长制造话题。", energy: "头脑风暴、辩论、尝试新鲜事物、打破既定规则。", shadow: "压力大时，你可能会变得散漫、无法集中注意力。" },
            "whale": { name: "蓝鲸", icon: "🐋", slogan: "深海的孤独神灵", tags: ["灵性", "洞察力", "深邃"], color: "from-blue-900 to-indigo-900", analysis: "你的灵魂古老而深邃。你拥有惊人的直觉，能轻易洞察他人的伪装和潜意识。你看起来温柔包容，但内心有一片谁也无法抵达的净土。", social: "你像变色龙一样能适应各种社交场合，但这非常消耗你的能量。", energy: "帮助他人成长、进行深度的精神交流、或者独自沉浸在艺术和哲学中。", shadow: "当承受过多他人的负面情绪时，你会彻底封闭自己。" },
            "deer": { name: "林鹿", icon: "🦌", slogan: "迷雾森林的诗人", tags: ["治愈", "文艺", "敏感"], color: "from-emerald-600 to-teal-800", analysis: "你内心拥有一座精致的秘密花园。你非常敏感，不仅是对他人的情绪，也包括对美和艺术。你温柔而坚定，虽然不善言辞，但内心有着丰富的道德罗盘。", social: "你比较慢热，在陌生环境中会显得害羞。但面对熟悉的人，你会展现出孩子气。", energy: "沉浸在幻想世界、创作、阅读、在大自然中独处。", shadow: "当理想破灭时，你容易陷入自我攻击和抑郁情绪。" },
            "swan": { name: "黑天鹅", icon: "🦢", slogan: "优雅的精神领袖", tags: ["魅力", "引导者", "感染力"], color: "from-gray-700 to-black", analysis: "你生来就是为了影响他人的。你不仅优雅，更有一种鼓舞人心的力量。你极其擅长发现别人的潜力，并愿意帮助他们成长。", social: "你是天生的社交家，能够真诚地关心每一个人，让每个人都觉得被重视。", energy: "组织活动、发表演讲、帮助朋友解决情感问题。", shadow: "当你的付出得不到回报时，你会变得控制欲极强。" },
            "dolphin": { name: "海豚", icon: "🐬", slogan: "自由的弄潮儿", tags: ["开心果", "脑洞", "自由"], color: "from-cyan-500 to-blue-600", analysis: "你拥有无比有趣的灵魂，脑洞比黑洞还大。常规和教条是你最大的敌人，你的一生都在追求新鲜感和可能性的路上。", social: "你是人见人爱的'开心果'，哪里有你哪里就有欢笑。", energy: "探索未知的领域、开始一个新的项目、结识有趣的新朋友。", shadow: "当感到被束缚或无聊时，你会变得烦躁不安、无法专注。" },
            "elephant": { name: "大象", icon: "🐘", slogan: "沉默的负重者", tags: ["可靠", "稳重", "责任"], color: "from-stone-500 to-stone-700", analysis: "你是世间最坚实的依靠。你话不多，但每一句都算数。你尊重传统和规则，拥有惊人的记忆力和耐心。虽然你不善于表达情感，但你的爱深沉而厚重。", social: "你比较慢热，不喜欢浮夸的社交场合。你更看重长久、稳定的关系。", energy: "把事情井井有条地完成、整理物品、独处。", shadow: "当生活发生剧变时，你会变得极度焦虑、固执己见。" },
            "penguin": { name: "企鹅", icon: "🐧", slogan: "冰原的守护者", tags: ["忠诚", "奉献", "坚韧"], color: "from-sky-600 to-blue-800", analysis: "在这个冷漠的世界里，你用体温温暖着身边的人。你极其重视关系和承诺，为了保护你在乎的人，你可以忍受极端的环境。", social: "你是最好的倾听者和照顾者。你总是默默付出，不求回报。", energy: "照顾家人朋友、营造温馨的环境、帮助他人解决具体困难。", shadow: "当压力过大时，你会陷入受害者心态，抱怨付出了很多却没人理解。" },
            "eagle": { name: "黑鹰", icon: "🦅", slogan: "天空的秩序官", tags: ["严厉", "高效", "执行"], color: "from-neutral-700 to-black", analysis: "你盘旋在高空，一切低效和混乱都逃不过你的眼睛。你信奉优胜劣汰，行事雷厉风行。你是秩序的维护者，也是最可靠的指挥官。", social: "你喜欢和能干、直接的人打交道。你习惯在群体中占据主导地位。", energy: "高效地完成任务、建立秩序、管理团队。", shadow: "当权威受到挑战时，你会变得暴怒、独断。" },
            "golden_retriever": { name: "金毛", icon: "🐕", slogan: "治愈系的小太阳", tags: ["社牛", "共情", "温暖"], color: "from-amber-400 to-orange-500", analysis: "你是朋友圈里的粘合剂，哪里有你，哪里就有温暖。你对他人的情绪变化也很敏感，总是把照顾别人的感受放在第一位。", social: "你是天生的'组局者'，热衷于八卦和分享生活。你害怕孤独。", energy: "组织聚会、帮助朋友、收到礼物和赞美。", shadow: "当感到被排挤或忽视时，你会变得情绪化、控制欲强。" },
            "octopus": { name: "章鱼", icon: "🐙", slogan: "深渊的技术流", tags: ["多面手", "冷静", "独行"], color: "from-violet-600 to-fuchsia-800", analysis: "你是天生的问题解决专家。你拥有极强的好奇心和动手能力，在这个复杂的世界里，你总能找到捷径。你像章鱼一样拥有多核大脑，冷静、高效。", social: "你话不多，但往往一针见血。你喜欢通过共同的兴趣活动来交友。", energy: "拆解和组装东西、极限运动、解决危机。", shadow: "压力大时，你会变得愤世嫉俗、鲁莽冲动。" },
            "capybara": { name: "水豚", icon: "🍊", slogan: "佛系的入定大师", tags: ["情绪稳定", "随缘", "和平"], color: "from-green-500 to-emerald-700", analysis: "精神状态极其美丽，天塌下来当被子盖。你拥有令人羡慕的'钝感力'，外界的焦虑和内卷很难干扰到你的节奏。你随遇而安，是所有焦虑型人格的天然解药。", social: "你从不强求融入任何圈子，但大家都很喜欢和你待在一起。", energy: "躺平、听音乐、撸猫、在舒适的环境中发呆。", shadow: "当被迫面对激烈的竞争或冲突时，你会选择逃避现实。" },
            "honey_badger": { name: "蜜獾", icon: "🦡", slogan: "无畏的逆行者", tags: ["硬刚", "行动派", "直率"], color: "from-orange-700 to-red-800", analysis: "平头哥，生死看淡，不服就干。你最讨厌虚伪和弯弯绕绕，有话直说。你拥有极强的生命力和抗压能力，逆境只会让你更兴奋。", social: "你是社交场上的'带头大哥'，喜欢热闹和刺激。你说话直率。", energy: "冒险、竞技运动、解决紧急危机、成为焦点。", shadow: "当感到无聊或受挫时，你会变得冲动、鲁莽。" },
            "peacock": { name: "孔雀", icon: "🦚", slogan: "盛夏的狂欢者", tags: ["焦点", "乐天", "闪耀"], color: "from-pink-500 to-rose-600", analysis: "生来就该站在聚光灯下。你热爱生活，热爱展示，你的存在本身就是一场盛大的演出。你讨厌沉闷和孤独，能瞬间点燃气氛。", social: "你是派对之王，没有人能拒绝你的热情。你喜欢被关注和赞美。", energy: "表演、聚会、购物、旅行、让周围的人开心大笑。", shadow: "当失去关注或独处时，你会变得深深的空虚和焦虑。" },
            "maine_coon": { name: "缅因猫", icon: "🐱", slogan: "温柔的巨人绅士", tags: ["间歇社恐", "外冷内热", "独立"], color: "from-stone-500 to-orange-400", analysis: "你是一个矛盾的综合体。你拥有猫的独立与高傲，却又在某些时刻展现出狗一般的忠诚与粘人。你在社交中游刃有余，但内心始终保留着一个谁也进不去的角落。", social: "在陌生人面前高冷，在熟人面前疯癫。", energy: "在舒适的家中招待三两好友、被喜欢的人抚摸顺毛。", shadow: "压力大时会突然消失，不回消息，切断联系。" },
            "chameleon": { name: "变色龙", icon: "🦎", slogan: "全能的社交黑客", tags: ["适应力", "伪装", "观察者"], color: "from-lime-500 to-green-600", analysis: "你是天生的演员和外交官。你可以无缝融入任何圈子，和任何人谈笑风生，但很少有人能看透你真实的底色。你的E和I属性随时切换。", social: "你可以和任何人聊得来，是极好的倾听者和捧哏。", energy: "观察人类行为、在不同圈子间游走、成功隐藏自己的真实意图。", shadow: "因为过度迎合他人而感到精疲力尽。" },
            "orca": { name: "虎鲸", icon: "🦈", slogan: "深情的深海霸主", tags: ["高智商", "家族", "护短"], color: "from-slate-800 to-black", analysis: "你是理智与情感的完美结合体。对待外人，你展现出顶级猎手的冷酷逻辑和策略；但对待自己人，你有着甚至超越人类的深情纽带。", social: "你是团队中的核心人物，既能做决策也能搞团建。", energy: "带领团队取得胜利、保护家人朋友、策划复杂的行动。", shadow: "可能会因为过度保护而变得控制欲强。" },
            "sea_turtle": { name: "海龟", icon: "🐢", slogan: "沉默的远航智者", tags: ["慢热", "智慧", "长情"], color: "from-teal-600 to-cyan-800", analysis: "你拥有坚硬的理性外壳，保护着柔软感性的内心。你活在自己的时区里，不慌不忙。外界的喧嚣很难打扰到你，你用一种近乎哲学的态度看待得失。", social: "非常慢热，需要很久才能走进你的内心。但一旦进入，你就是最忠诚的伙伴。", energy: "独处思考、长途旅行、看着事情慢慢变好。", shadow: "由于反应较慢或过于退让，容易错失机会。" },
            "squirrel": { name: "松鼠", icon: "🐿️", slogan: "敏捷的收藏家", tags: ["未雨绸缪", "焦虑", "灵活"], color: "from-amber-600 to-orange-700", analysis: "你看起来总是很忙碌，很有计划，但你的内心其实经常处于'秩序'与'混乱'的叠加态。你喜欢收集信息、囤积物资来对抗不安全感。", social: "你很机灵，消息灵通，是朋友圈里的'包打听'。", energy: "整理收藏品、找到高性价比的东西、解决突发的小麻烦。", shadow: "容易陷入过度焦虑，囤积很多没用的东西。" },
            "koala": { name: "考拉", icon: "🐨", slogan: "清醒的入世隐士", tags: ["佛系", "旁观", "挑剔"], color: "from-gray-400 to-slate-500", analysis: "你看起来懒洋洋的，对什么都无所谓，但这其实是你筛选世界的方式。你对环境和人其实非常挑剔，只有让你感到绝对舒适的人事物，你才会紧抱不放。", social: "你不想认识新朋友，只想和老朋友挂在一起。", energy: "睡觉、发呆、吃好吃的、被照顾。", shadow: "可能会变得过于冷漠和懒散，对他人的痛苦无动于衷。" },
            "unicorn": { name: "独角兽", icon: "🦄", slogan: "纯粹的幻想生物", tags: ["极致理想", "纯洁", "高维"], color: "from-fuchsia-300 to-purple-400", analysis: "你的灵魂纯粹得不像这个世界的产物。你是一个极致的理想主义者，对美、爱和正义有着近乎洁癖的追求。你在人群中显得格格不入，因为你总是试图在凡间寻找天堂。", social: "你寻找的是灵魂伴侣，对于世俗的社交感到疲惫。", energy: "做梦、创作、帮助弱小、感受到神圣的连接。", shadow: "极度脆弱，容易被现实的残酷击碎。" },
            "crocodile": { name: "鳄鱼", icon: "🐊", slogan: "冷酷的生存机器", tags: ["现实", "耐心", "强者"], color: "from-green-800 to-stone-800", analysis: "你是绝对的现实主义者。你没有多余的情绪，只关注结果和生存。你拥有可怕的耐心，可以潜伏很久只为等待一个机会。在弱肉强食的世界里，你是站在食物链顶端的强者。", social: "你不需要朋友，只需要盟友或猎物。", energy: "狩猎成功、掌控局势、看着对手失败。", shadow: "变得冷血无情，为了利益可以牺牲一切，包括亲密关系。" }
        };

        // ================= 逻辑部分 =================
        let currentQuestionIndex = 0;
        let scores = { E:0, I:0, S:0, N:0, T:0, F:0, J:0, P:0 };
        let historyStack = [];
        let currentQuizMode = 'short';
        let currentQuestions = [];

        function showPage(pageId) {
            const pages = ['page-landing', 'page-quiz', 'page-loading', 'page-result'];
            pages.forEach(id => {
                const el = document.getElementById(id);
                if(id === pageId) {
                    el.classList.remove('hidden');
                    if(id !== 'page-loading' && id !== 'page-result') el.classList.add('flex');
                    else if(id === 'page-result') el.classList.remove('hidden'); 
                    else el.style.display = 'flex';
                } else {
                    el.classList.add('hidden');
                    el.classList.remove('flex');
                    if(id === 'page-loading') el.style.display = 'none';
                }
            });
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        function returnToLanding() {
            // 重置状态
            currentQuestionIndex = 0;
            scores = { E:0, I:0, S:0, N:0, T:0, F:0, J:0, P:0 };
            historyStack = [];
            // 显示首页
            showPage('page-landing');
        }
        
        function saveCard(btn) {
            const element = document.getElementById('result-card-container');
            const originalText = btn.innerHTML;
            
            // 更改按钮状态
            btn.innerHTML = `
                <svg class="animate-spin -ml-1 mr-2 h-4 w-4 text-sage" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                生成中...
            `;
            btn.disabled = true;

            // 使用 html2canvas 生成图片
            html2canvas(element, {
                scale: 2, // 提高清晰度
                backgroundColor: null, // 透明背景
                useCORS: true,
                logging: false,
                allowTaint: true
            }).then(canvas => {
                // 创建下载链接
                const link = document.createElement('a');
                const animalName = document.getElementById('result-animal').innerText;
                link.download = `灵魂栖息地_${animalName}_海报.png`;
                link.href = canvas.toDataURL('image/png');
                link.click();
                
                // 恢复按钮
                btn.innerHTML = '✨ 已保存';
                setTimeout(() => {
                    btn.innerHTML = originalText;
                    btn.disabled = false;
                }, 2000);
            }).catch(err => {
                console.error("Screenshot failed:", err);
                btn.innerHTML = '❌ 保存失败';
                alert('图片生成失败，请尝试直接截图屏幕保存～');
                setTimeout(() => {
                    btn.innerHTML = originalText;
                    btn.disabled = false;
                }, 2000);
            });
        }

        function startQuiz(mode) {
            currentQuizMode = mode;
            // 现在的逻辑：直接使用正确的数据源
            currentQuestions = mode === 'short' ? questions : questions_60;
            
            currentQuestionIndex = 0;
            scores = { E:0, I:0, S:0, N:0, T:0, F:0, J:0, P:0 };
            historyStack = [];
            
            showPage('page-quiz');
            renderQuestion();
        }

        function backToHome() {
            if(confirm("确定要中断这次灵魂探索吗？")) showPage('page-landing');
        }

        function renderQuestion() {
            const q = currentQuestions[currentQuestionIndex];
            // 更新进度
            const progress = ((currentQuestionIndex) / currentQuestions.length) * 100;
            document.getElementById('progress-bar').style.width = `${progress}%`;
            document.getElementById('quiz-progress-num').innerText = String(currentQuestionIndex + 1).padStart(2, '0');
            
            // 动画过渡：先淡出再淡入
            const qText = document.getElementById('question-text');
            const cContainer = document.getElementById('options-container');
            
            qText.style.opacity = 0;
            cContainer.style.opacity = 0;
            
            setTimeout(() => {
                qText.innerText = q.q;
                cContainer.innerHTML = '';
                
                const labels = ['A', 'B', 'C', 'D'];
                q.options.forEach((opt, index) => {
                    const btn = document.createElement('div');
                    // 选项样式：毛玻璃卡片
                    btn.className = "w-full p-5 rounded-2xl bg-white/60 border border-white shadow-sm hover:shadow-md hover:bg-white hover:-translate-y-0.5 transition-all duration-300 cursor-pointer group flex items-start gap-4";
                    btn.onclick = () => handleAnswer(opt.s);
                    
                    btn.innerHTML = `
                        <span class="flex-shrink-0 w-6 h-6 rounded-full bg-white border border-sage/30 text-sage text-xs font-bold flex items-center justify-center font-english group-hover:bg-sage group-hover:text-white transition-colors mt-0.5">${labels[index]}</span>
                        <span class="text-sm text-gray-700 font-medium leading-relaxed group-hover:text-gray-900">${opt.t}</span>
                    `;
                    cContainer.appendChild(btn);
                });

                qText.style.opacity = 1;
                cContainer.style.opacity = 1;
                
                // 控制按钮
                const controls = document.getElementById('quiz-controls');
                controls.style.opacity = currentQuestionIndex > 0 ? 1 : 0;
            }, 300);
        }

        function handleAnswer(scoreDelta) {
            historyStack.push({ ...scores });
            for (let key in scoreDelta) if (scores.hasOwnProperty(key)) scores[key] += scoreDelta[key];
            
            if (currentQuestionIndex < currentQuestions.length - 1) {
                currentQuestionIndex++;
                renderQuestion();
            } else {
                finishQuiz();
            }
        }

        function prevQuestion() {
            if (currentQuestionIndex > 0 && historyStack.length > 0) {
                scores = historyStack.pop();
                currentQuestionIndex--;
                renderQuestion();
            }
        }

        function finishQuiz() {
            showPage('page-loading');
            const loadingTexts = ["正在连接潜意识...", "分析灵魂色谱...", "绘制性格图腾...", "生成最终预言..."];
            let step = 0;
            const interval = setInterval(() => {
                if (step < loadingTexts.length) {
                    document.getElementById('loading-text').innerText = loadingTexts[step];
                    step++;
                }
            }, 800);
            
            setTimeout(() => { 
                clearInterval(interval); 
                calculateResult(); 
            }, 3500);
        }

        function calculateResult() {
            const s = scores;
            const dim1 = s.E >= s.I ? 'E' : 'I';
            const dim2 = s.S >= s.N ? 'S' : 'N';
            const dim3 = s.T >= s.F ? 'T' : 'F';
            const dim4 = s.J >= s.P ? 'J' : 'P';
            const baseType = dim1 + dim2 + dim3 + dim4;

            const diffEI = Math.abs(s.E - s.I);
            const diffTF = Math.abs(s.T - s.F);
            const diffJP = Math.abs(s.J - s.P);
            const diffSN = Math.abs(s.S - s.N);

            let animalKey = "";
            // 逻辑复用
            if (dim2 === 'N' && dim3 === 'F' && diffSN > 4 && diffTF > 4) animalKey = "unicorn";
            else if (dim2 === 'S' && dim3 === 'T' && diffSN > 4 && diffTF > 4) animalKey = "crocodile";
            else if (diffTF <= 1 && dim1 === 'E') animalKey = "orca";
            else if (diffTF <= 1 && dim1 === 'I') animalKey = "sea_turtle";
            else if (diffEI <= 1 && dim3 === 'F') animalKey = "maine_coon";
            else if (diffEI <= 1 && dim3 === 'T') animalKey = "chameleon";
            else if (diffJP <= 1) animalKey = "squirrel";
            else if (diffSN <= 1) animalKey = "koala";
            else {
                const baseMap = {
                    "INTJ": "owl", "INTP": "snow_leopard", "ENTJ": "lion", "ENTP": "fox",
                    "INFJ": "whale", "INFP": "deer", "ENFJ": "swan", "ENFP": "dolphin",
                    "ISTJ": "elephant", "ISFJ": "penguin", "ESTJ": "eagle", "ESFJ": "golden_retriever",
                    "ISTP": "octopus", "ISFP": "capybara", "ESTP": "honey_badger", "ESFP": "peacock"
                };
                animalKey = baseMap[baseType];
            }

            if (!animalKey || !animals[animalKey]) animalKey = "capybara"; 
            renderResultPage(animalKey);
            showPage('page-result');
        }

        function renderResultPage(key) {
            const data = animals[key];
            
            document.getElementById('result-animal').innerText = data.name;
            document.getElementById('result-icon').innerText = data.icon;
            document.getElementById('result-slogan').innerText = data.slogan;
            
            document.getElementById('result-analysis').innerText = data.analysis;
            document.getElementById('result-social').innerText = data.social;
            document.getElementById('result-energy').innerText = data.energy;
            document.getElementById('result-shadow').innerText = data.shadow;

            // 根据不同的动物类型，微调背景色，但保持低饱和度
            const bgMap = {
                'from-gray': 'bg-gray-100',
                'from-indigo': 'bg-indigo-50',
                'from-yellow': 'bg-yellow-50',
                'from-orange': 'bg-orange-50',
                'from-blue': 'bg-blue-50',
                'from-emerald': 'bg-emerald-50',
                'from-cyan': 'bg-cyan-50',
                'from-sky': 'bg-sky-50',
                'from-neutral': 'bg-neutral-100',
                'from-amber': 'bg-amber-50',
                'from-violet': 'bg-violet-50',
                'from-green': 'bg-green-50',
                'from-pink': 'bg-pink-50',
                'from-stone': 'bg-stone-100',
                'from-lime': 'bg-lime-50',
                'from-teal': 'bg-teal-50',
                'from-fuchsia': 'bg-fuchsia-50'
            };
            // 提取颜色前缀
            let colorClass = 'bg-gray-50';
            for (let k in bgMap) {
                if (data.color.includes(k)) colorClass = bgMap[k];
            }
            // 移除旧的颜色类，添加新的
            const resultBg = document.getElementById('result-bg');
            resultBg.className = `absolute inset-0 opacity-30 transition-colors duration-1000 bg-gradient-to-br from-white to-transparent ${colorClass}`;

            const tagsContainer = document.getElementById('result-tags');
            tagsContainer.innerHTML = data.tags.map(t => 
                `<span class="px-3 py-1 bg-white border border-sage/20 rounded-full text-[10px] text-sage font-bold tracking-widest uppercase shadow-sm">${t}</span>`
            ).join('');

            // 更新日期
            const date = new Date();
            document.querySelector('.date-display').innerText = `${date.getFullYear()}.${String(date.getMonth()+1).padStart(2,'0')}.${String(date.getDate()).padStart(2,'0')}`;
        }

        function showPokedex() {
            const grid = document.getElementById('pokedex-grid');
            grid.innerHTML = '';
            
            Object.keys(animals).forEach(key => {
                const a = animals[key];
                const card = document.createElement('div');
                card.className = "bg-white p-4 rounded-xl border border-gray-100 flex gap-4 items-center hover:shadow-md transition-all cursor-pointer";
                
                // 修复逻辑：点击直接跳转，不需要等待侧边栏关闭动画
                card.onclick = () => { 
                    renderResultPage(key); 
                    // 先强制关闭侧边栏（不带动画，避免视觉干扰）
                    document.getElementById('page-pokedex').classList.add('hidden');
                    document.getElementById('pokedex-drawer').classList.add('translate-x-full');
                    showPage('page-result'); 
                };

                card.innerHTML = `
                    <div class="w-12 h-12 rounded-full bg-gray-50 flex items-center justify-center text-2xl shadow-inner shrink-0">
                        ${a.icon}
                    </div>
                    <div>
                        <h4 class="font-serif font-bold text-gray-800 text-sm">${a.name}</h4>
                        <p class="text-[10px] text-gray-400 mt-1">${a.slogan}</p>
                    </div>
                `;
                grid.appendChild(card);
            });
            
            const p = document.getElementById('page-pokedex');
            const drawer = document.getElementById('pokedex-drawer');
            p.classList.remove('hidden');
            // FIX: 使用 requestAnimationFrame 确保动画生效
            requestAnimationFrame(() => {
                drawer.classList.remove('translate-x-full');
            });
        }

        function closePokedex() {
            const p = document.getElementById('page-pokedex');
            const drawer = document.getElementById('pokedex-drawer'); // Use ID selector
            drawer.classList.add('translate-x-full');
            setTimeout(() => {
                p.classList.add('hidden');
            }, 300);
        }
    </script>
</body>
</html>
